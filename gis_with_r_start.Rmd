---
title: "GIS with R <br/> how to start?"
subtitle: "`r emojifont::emoji('world_map')`"
author: "Jakub Nowosad"
date: "GIS Learning Community, Cincinnati, 2017-11-01"
output:
  xaringan::moon_reader:
          css: ["default", "style.css"]
          lib_dir: libs
          nature:
                  highlightStyle: github
                  highlightLines: true
                  countIncrementalSlides: false
                  
---
class: center, middle

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(fig.align = "center", warning = FALSE, message = FALSE)
```

<!-- In preparation for the course you should: -->

<!--     Ensure that you have the latest versions of R and RStudio installed on your laptop: https://www.rstudio.com/products/rstudio/download/ -->
<!--     Brush up on your R skills if you"re not an R user, e.g. with: -->
<!--         This excellent tutorial that you can work through to get used to the interface: https://www.datacamp.com/courses/free-introduction-to-r -->
<!--         A more detailed account by Gillespie and Lovelace (2017): https://csgillespie.github.io/efficientR/set-up.html#rstudio -->
<!--     Take a look at how GitHub works - we"ll be using it for sharing course materials and sharing links and examples during the course, e.g. by reading this page (and following the tutorial if really keen): https://guides.github.com/activities/hello-world/ -->

# Part I - Examples

---
### Static visualization

```{r, eval = FALSE}
library(tidyverse)
library(sf)
library(spData)

world = st_read(system.file("shapes/world.gpkg", package = "spData"))
world_globe <- sf::st_transform(world,
        "+proj=laea +y_0=0 +lon_0=20 +lat_0=0 +ellps=WGS84 +no_defs")


p1 = ggplot(world_globe) +
        geom_sf(data = world_globe, aes(fill = lifeExp))  +
        coord_sf(crs = st_crs(world_globe)) +
        # scale_fill_manual(values = redcol9w_vec, labels = redcol9w$main_name) +
        # theme_void() + 
        # guides(fill = FALSE) +
        labs(fill = "Life expactancy: ")
p1
# ggsave(p1, file="figs/09_world_clas9.png", width = 100, height = 55, units = "mm")
# system(sprintf("mogrify -trim %s", "figs/09_world_clas9.png"))
```

---
### Static visualization
https://hafen.github.io/geofacet/

```{r, eval=FALSE}
library(geofacet)
data("state_unemp", package = "geofacet")
ggplot(state_unemp, aes(year, rate)) +
        geom_line() +
        facet_geo(~ state, grid = "us_state_grid2", label = "name") +
        scale_x_continuous(labels = function(x) paste0("'", substr(x, 3, 4))) +
        labs(title = "Seasonally Adjusted US Unemployment Rate 2000-2016",
             caption = "Data Source: bls.gov",
             x = "Year",
             y = "Unemployment Rate (%)") +
        theme(strip.text.x = element_text(size = 6)) + 
        theme_bw()
```

---
### Static visualization
https://github.com/rCarto/linemap

```{r, eval = FALSE}
library(sf)
library(tidycensus)
library(linemap)

census_api_key("231364375917673d2913240fd18a6c0c103bc62a")
oh_pop <- get_acs(geography = "tract", 
                     variables = "B01003_001E", 
                     state = "OH",
                     geometry = TRUE) 

plot(oh_pop$geometry)
oh_pop
oh_pop2 = st_transform(oh_pop, 26917)

oh_pop2_grid = getgrid(x = oh_pop2, cellsize = 2500, var = "estimate")
opar = par(mar = c(0,0,0,0))
plot(st_geometry(oh_pop2), col="lightblue3", border = NA, bg = "lightblue2")
linemap(x = oh_pop2_grid, var = "estimate", k = 3, threshold = 1,
        col = "lightblue3", border = "white", lwd = 0.8,
        add = TRUE)
par(opar)

```

---
### Animation

# https://github.com/mtennekes/tmap/issues/142

```{r, eval=FALSE}
library("gapminder")
library("tidyverse")
library("sf")
library("tmap")
library("spData")
europe_area = st_polygon(list(rbind(c(-13, 34), c(-13, 72),
                                    c(43, 72), c(43, 34), c(-13, 34)))) %>% 
        st_sfc() %>% 
        st_set_crs(st_crs(world))

europe = st_intersection(world, europe_area) 
europe_gdp = europe %>% 
        inner_join(gapminder, by = c("name_long" = "country"))

m1 = tm_shape(europe) + 
        tm_fill("grey") + 
     tm_shape(europe_gdp) + 
        tm_fill("gdpPercap.y", title = "GDP per capita: ") +
        tm_borders() + 
        tm_facets(by = "year", nrow = 1, ncol = 1, drop.units = TRUE) + 
        tm_legend(text.size = 1,
                  title.size = 1.2,
                  position = c("left", "TOP"),
                  height = 0.3)

animation_tmap(m1, filename = "figs/anim.gif", width = 650, height = 600)

## or
world_gdp = world %>% 
        left_join(gapminder, by = c("name_long" = "country"))

m1 = tm_shape(world_gdp, bbox = raster::extent(-13, 43, 34, 72)) + 
        tm_fill("grey") +
     tm_shape(world_gdp) +
        tm_fill("gdpPercap.y", title = "GDP per capita: ") +
        tm_borders() + 
        tm_facets(by = "year", nrow = 1, ncol = 1, drop.units = TRUE, showNA = FALSE) + 
        tm_legend(text.size = 1,
                  title.size = 1.2,
                  position = c("left", "TOP"),
                  height = 0.3)

animation_tmap(m1, filename = "figs/anim.gif", width = 650, height = 600)
```

---
### Interactive visualization

<!-- https://rstudio.github.io/leaflet/ -->

```{r}
library(tigris)
library(leaflet)
library(sf)
library(dplyr)
library(osmdata)

oh <- counties(state="OH")
hamilton <- oh %>% 
        st_as_sf(.) %>% 
        filter(NAME=="Hamilton") %>% 
        st_transform(4326)

pubs = opq(bbox = "Cincinnati OH") %>% 
  add_osm_feature(key = "amenity", value = "pub") %>% 
  osmdata_sf()

leaflet(hamilton) %>%
        addTiles(group = "OSM") %>%
        addProviderTiles(providers$Stamen.Watercolor, group = "Watercolor") %>% 
        addProviderTiles(providers$Stamen.TonerLite, group = "Toner Lite") %>% 
        addLayersControl(    baseGroups = c("OSM", "Watercolor", "Toner Lite")) %>% 
        addPolygons() %>% 
        addMarkers(data = pubs$osm_points, popup=~as.character(name))
```

---
### Raster calculations

```{r}
library(raster)
download_landsat8 <- function(destination_filename, band){
        filename <- paste0("http://landsat-pds.s3.amazonaws.com/L8/038/034/LC80380342015230LGN00/LC80380342015230LGN00_B", band, ".TIF")
        download.file(filename, destination_filename, method='auto')
        return(destination_filename)
}

# download_landsat8("data/landsat_b4.tif", band = 4)
# download_landsat8("data/landsat_b5.tif", band = 5)

b4 = raster("data/landsat_b4.tif")
b5 = raster("data/landsat_b5.tif")

ndvi_calc = function(b4, b5){
        ndvi = (b5 - b4)/(b5 + b4)
        ndvi
}

my_ndvi = overlay(b4, b5, fun = ndvi_calc)
plot(my_ndvi)

hist(my_ndvi)
```

<!-- two bands from two areas -> merge -> crop/mask to polygon -> calculate ndvi -->
---
###

```{r}
library(raster)
# getData('SRTM', lon = 5, lat = 45, path = "data")
srtm = raster("data/srtm_38_04.tif")
my_area = extent(c(8, 10, 41.3, 43.1))
my_srtm = crop(srtm, my_area)

plot(my_srtm)

library(mapview)
mapView(my_srtm)

my_terrain = terrain(my_srtm, opt = c("slope", "aspect", "tpi", "tri", "roughness", "flowdir"))
plot(my_terrain)

library(rasterVis)
levelplot(my_terrain)
```

<!-- --- -->
<!-- ### Interpolation -->


<!-- ```{r, eval=FALSE, echo=FALSE} -->
<!-- library(raster) -->
<!-- library(sf) -->
<!-- set.seed(2017-10-22) -->
<!-- # getData('worldclim', var = 'tmax', res = 0.5, lon = 5, lat = 45, path = "data") -->
<!-- my_area = extent(c(9, 9.1, 42, 42.05)) -->
<!-- tmax = raster("data/wc0.5/tmax11_16.bil") %>%  -->
<!--         crop(my_area) %>%  -->
<!--         sampleRandom(size = 100, sp = TRUE) %>%  -->
<!--         st_as_sf() %>%  -->
<!--         dplyr::mutate(tmax11_16 = tmax11_16/10) %>%  -->
<!--         st_set_crs("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0") %>%  -->
<!--         st_write("data/tmax_points.gpkg", layer_options = "OVERWRITE=true") -->
<!-- ``` -->


<!-- ```{r, eval=FALSE, echo=FALSE} -->
<!-- library(sf) -->
<!-- library(raster) -->
<!-- library(gstat) -->
<!-- tmax = st_read("data/tmax_points.gpkg") -->
<!-- plot(tmax) -->

<!-- # getData('SRTM', lon = 5, lat = 45, path = "data") -->
<!-- srtm = raster("data/srtm_38_04.tif") -->
<!-- my_area = extent(c(9, 9.1, 42, 42.05)) -->
<!-- my_srtm = crop(srtm, my_area) -->

<!-- tmax_sp = as(tmax, "Spatial") -->
<!-- my_srtm_sp = as(my_srtm, 'SpatialPointsDataFrame') -->

<!-- g <- gstat(NULL, id='tmax', form = tmax11_16~1, data = tmax_sp) -->
<!-- g <- gstat(g, id='srtm', form = srtm_38_04~1, data = my_srtm_sp) -->
<!-- g -->

<!-- v <- variogram(g) -->
<!-- plot(v) -->
<!-- ``` -->


<!-- points of ndvi -> a little bit of geostat -> compare to the previous map -> plots -->

---
### Geocoding



---
class: center, middle
# Part II - An intro to R

---
### What's R

---
### How to get R

- https://www.r-project.org/
- http://cran.rstudio.com/bin/linux/
- http://cran.rstudio.com/bin/windows/base/
- http://cran.rstudio.com/bin/macosx/

![](figs/R.png)  

---
### Rstudio

- http://www.rstudio.com/ide/download/desktop
- This is an Integrated Development Environment (IDE) for R
- RStudio has many useful features, such as text editor, syntax highlighting, suggested code auto-completion, and many more

![](figs/rstudio.png)

---
### How to get help?

```{r, eval=FALSE}
# if you know a function name
?mean
```

```{r, eval=FALSE}
# if you know what you want to do
??"anova"
```

- You can also look for help using the help window or **F1** key

## Online help
- [stackoverflow.com](http://stackoverflow.com/questions/tagged/r) - R related questions
- [gis.stackexchange.com](https://gis.stackexchange.com/questions/tagged/r) - GIS and R related questions
- [twitter](http://twitter.com/) - `#rstats`
- Web search engines [Rseek](http://www.rseek.org/), [Duckduckgo](http://duckduckgo.com/), [Google](http://google.com/), [Bing](http://bing.com/), etc.

---
### How to start with R?

https://www.computerworld.com/article/2497143/business-intelligence/business-intelligence-beginner-s-guide-to-r-introduction.html

---
### R packages

- A package is a group of functions
- `install.packages()` can be used to install packages from CRAN:

```{r, eval=FALSE}
install.packages('raster')
```

- To use a package, load it with function `library()`
- Unlike `install.packages()`, you need to load selected packages everytime you run R!

```{r}
library('raster')
```

---
class: center, middle
# Part III - An intro to spatial R

---
### Spatial R 

```{r gdsl, echo=FALSE, message=FALSE, results="asis"}
d = readr::read_csv("data/gis-vs-gds-table.csv")
knitr::kable(x = d, caption = "Differences in emphasis between the fields of Geographic Information Systems (GIS) and Geographic Data Science (GDS)", format = "html")
```

- **sf** and **sp** are the most important R packages to handle vector data; **sf** is a successor of **sp** but its still evolving. Moreover, many other R packages depend on the functions and classes for the **sp** package
- **raster** is an extension of spatial data classes to work with rasters
- There are many ways to vizualize spatial data in R, such as the **ggplot2**, **rasterVis**, **tmap**, **leaflet**, and **mapview** packages
- It is easy to connect R with a GIS software - GRASS GIS (**rgrass7**), SAGA (**RSAGA**), QGIS (**RQGIS** and **qgisremote**), and ArcGIS (**arcgisbinding**)

<!-- --- -->
<!-- ### Spatial operations -->

<!-- It"s a big topic which includes: -->

<!-- Spatial subsetting -->
<!-- Spatial joining/aggregation -->
<!-- Topological relations -->
<!-- Distances -->
<!-- Spatial geometry modification -->
<!-- Raster operations (map algebra) -->

---
### The **sf** package

The **sf** package in an R implementation of [Simple Features](https://en.wikipedia.org/wiki/Simple_Features). This package incorporates:
- A new spatial data class system in R
- Functions for reading and writing data
- Tools for spatial operations on vectors

Most of the functions in this package starts with prefix `st_`.

```{r, eval=FALSE}
devtools::install_github("edzer/sfr") # development version
```

or

```{r, eval=FALSE}
install.packages("sf") # stable version
```

You need a recent version of the GDAL, GEOS, Proj.4, and UDUNITS libraries installed for this to work on Mac and Linux. More information on that at https://github.com/edzer/sfr.

```{r, message=FALSE}
library("sf")
```

---
### Reading spatial data

```{r}
wrld <- st_read("data/wrld.shp")
```

```{r}
ham <- st_read("data/hamilton_county.gpkg")
```

---
### Reading spatial data - text files

```{r}
ham_cities_sf = st_read("data/hamiltion_cities.csv", 
                        options = c("X_POSSIBLE_NAMES=X",
                                    "Y_POSSIBLE_NAMES=Y",
                                    "KEEP_GEOM_COLUMNS=NO"))
```

---
### Writing spatial data

```{r, warning=FALSE, results="hide", echo=FALSE}
file.remove(c("data/new_wrld.shp", "data/new_wrld.gpkg"))
```

```{r, warning=FALSE}
st_write(wrld, "data/new_wrld.shp")
```

```{r, warning=FALSE}
st_write(wrld, "data/new_wrld.gpkg")
```

```{r, warning=FALSE, results="hide", echo=FALSE}
file.remove(c("data/new_wrld.shp", "data/new_wrld.gpkg"))
```

---
### **sf** structure

The **sf** object is a table (`data.frame`) with an additional geometry column - typically named `geom` or `geometry` and spatial metadata (`geometry type`, `dimension`, `bbox`, `epsg (SRID)`, `proj4string`).

```{r, echo = FALSE}
wrld[1:5, 1:3]
```

---
### Attributes - the **dplyr** package

- It is easy to use the **dplyr** package on `sf` objects:

```{r, message=FALSE}
library("dplyr")
```

- `filter()`:

```{r}
wrld_fil <- filter(wrld, pop < 297517)
```

```{r, echo=FALSE}
wrld_fil[1:3, ]
```

---
### Attributes - the **dplyr** package

- `mutate()`:

```{r}
wrld_mut <- mutate(wrld, pop_density = pop/area_km2)
```

```{r, echo=FALSE}
wrld_mut[1:3, ]
```

---
### Attributes - the **dplyr** package

- `summarize()`:

```{r}
wrld_sum1 <- summarize(wrld, pop_sum = sum(pop, na.rm = TRUE), 
                      pop_mean = mean(pop, na.rm = TRUE), 
                      pop_median = median(pop, na.rm = TRUE))
```

```{r, echo=FALSE}
wrld_sum1[1, ]
```

---
### Attributes - the **dplyr** package

- `summarize()`:

```{r}
wrld_sum1 <- wrld %>% 
        group_by(continent) %>% 
        summarize(pop_sum = sum(pop, na.rm = TRUE), 
                      pop_mean = mean(pop, na.rm = TRUE), 
                      pop_median = median(pop, na.rm = TRUE))
```

```{r, echo=FALSE}
wrld_sum1[1:3, ]
```

---
### CRS and Reprojection

```{r}
st_crs(wrld)
```

- The `st_transform()` can be used to transform coordinates

```{r}
wrld_3857 <- st_transform(wrld, 3857)
st_crs(wrld_3857)
```

---
### CRS and Reprojection

```{r,echo=FALSE, eval=TRUE, include=FALSE}
png("figs/coord_compare.png", width = 800, height = 500)
par(mfrow = c(1, 2), mar=c(0,0,0,0))
plot(wrld[0], main = "WGS 84");plot(wrld_3857[0], main = "Web Mercator")
dev.off()
```

![](figs/coord_compare.png)

---
### Spatial operations

<!-- http://robinlovelace.net/geocompr/spatial-data-operations.html#spatial-operations-on-vector-data -->

---
### The **raster** package

The **raster** package consists of method and classes for raster processing. It allows to:

- Read and write raster data
- Perform raster algebra and raster manipulations
- Work on large datasets due to its ability to process data in chunks
- Visualize raster data
- Many more...

Basic **raster** operations are ilustrated at https://rpubs.com/etiennebr/visualraster.

This package has three object classes:

- `RasterLayer` - for single-layer objects
- `RasterStack` - for multi-layer objects from separate files or a few layers from a single file
- `RasterBrick` - for multi-layer objects linked to a single file

```{r, message=FALSE}
library("raster")
```
---
### Reading

```{r}
dem <- raster("data/srtm.tif")
dem
```

---
### Writing

```{r, warning=FALSE, results="hide", echo=FALSE}
file.remove(c("data/new_dem.tif", "data/new_dem2.tif"))
```

```{r}
writeRaster(dem, "data/new_dem.tif")
```


```{r}
writeRaster(dem, "data/new_dem2.tif", 
            datatype = "FLT4S", options=c("COMPRESS=DEFLATE"))
```

```{r, warning=FALSE, results="hide", echo=FALSE}
file.remove(c("data/new_dem.tif", "data/new_dem2.tif"))
```

```{r}
writeFormats()
```

---
### **raster** structure

```{r}
dem
```

```{r}
inMemory(dem)
```

---
### Attributes

- the `getValues` function returns values from a raster object:

```{r}
values_dem <- getValues(dem)
```

```{r, echo=FALSE}
values_dem[1:50]
```

---
### Attributes

.pull-left[
```{r}
new_dem <- dem + 50
```

```{r, fig.align="center", fig.height=5, echo=FALSE}
plot(new_dem)
```
]

.pull-right[
```{r}
new_dem2 <- dem * new_dem
```

```{r, fig.align="center", fig.height=5, echo=FALSE}
plot(new_dem2)
```
]

---
### CRS and Reprojection

```{r}
crs(dem)
```

```{r}
dem3857 <- projectRaster(dem, 
                         crs="+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0
                         +a=6378137 +b=6378137 +towgs84=0,0,0,0,0,0,0
                         +units=m +no_defs")
```

http://spatialreference.org/

---
### CRS and Reprojection

```{r,echo=FALSE, eval=TRUE, include=FALSE}
png("figs/coord_compare_raster.png", width = 800, height = 400)
par(mfrow = c(1, 2), mar=c(4,4,4,8))
# par(mfrow = c(1, 2))
plot(dem);plot(dem3857)
dev.off()
```

![](figs/coord_compare_raster.png)

---
### Extract

```{r}
ham_cities_sp <- as(ham_cities_sf, "Spatial")
raster::extract(dem, ham_cities_sp)
```

```{r}
ham_cities_sf$dem <- raster::extract(dem, ham_cities_sp)
ham_cities_sf
```

---
### Crop

```{r}
ham84 <- st_transform(ham, 4326)
ham_sp <- as(ham84, "Spatial")
```

.pull-left[ 
```{r}
dem_crop <- crop(dem, ham_sp)
```

```{r, echo=FALSE}
plot(dem_crop)
```
]

.pull-right[ 
```{r}
dem_mask <- mask(dem_crop, ham_sp)
```

```{r, echo=FALSE}
plot(dem_mask)
```
]

---
### Reading spatial data - data packages

```{r datapackages, echo=FALSE, results='asis'}
datapackages = tibble::tribble(~`Package name`, ~Description,
                               "osmdata", "Download and import of OpenStreetMap data",
                               "raster", "The getData() function downloads and imports administrative country, SRTM/ASTER elevation, WorldClim data",
                               "rnaturalearth", "Functions to download Natural Earth vector and raster data, including world country borders",
                               "tigirs", "Census TIGER/Line shapefiles in R",
                               "USAboundaries", "Contemporary state, county, and congressional district boundaries for the United States of America, as well as historical boundaries from 1629 to 2000 for states and counties",
                               "rnoaa", "An interface to many NOAA data sources",
                               "rWBclimate", "The World Bank climate data")
knitr::kable(datapackages, format = "html")
```

---
### Basic maps

- Basic maps of `sf` object can be quickly created using the `plot()` function:

```{r, eval=FALSE}
plot(wrld[0])
```

```{r, eval=FALSE}
plot(wrld["pop"])
```

```{r, eval=TRUE, echo=FALSE, message=FALSE, include=FALSE}
png("figs/plot_compare.png", width = 800, height = 300)
par(mfrow = c(1, 2), mar=c(0,0,1,0))
plot(wrld[0]);plot(wrld["pop"])
dev.off()
```

![](figs/plot_compare.png)

---
### Basic maps

```{r, fig.align="center"}
plot(dem)
```

---
### **rasterVis**

- https://oscarperpinan.github.io/rastervis/
- http://www.colorbrewer.org

```{r, message=FALSE, fig.align="center", fig.height=4}
library("rasterVis")
my_theme <- rasterTheme(region=brewer.pal("RdYlGn", n = 9))
p <- levelplot(dem_crop, margin = FALSE, par.settings = my_theme)
p <- p + layer(sp.lines(ham_sp, lwd = 3, col = "darkgrey"))
p + layer(sp.points(ham_cities_sp, pch = 19, col = "black"))
```

---
### **tmap**

- https://cran.r-project.org/web/packages/tmap/vignettes/tmap-nutshell.html

```{r, fig.align="center", fig.height=4}
library("tmap")
tm_shape(wrld, projection="wintri") +
        tm_polygons("lifeExp", style="pretty", palette="RdYlGn",
                    auto.palette.mapping=FALSE, title=c("Life expactancy")) +
        tm_style_grey()
```

---
### **leaflet**

```{r, eval=FALSE}
library("leaflet")
leaflet(ham_sp) %>%
        addProviderTiles(providers$Stamen.Watercolor) %>% 
        # addTiles() %>%
        addPolygons() %>% 
        addMarkers(data=ham_cities_sp, popup=~as.character(name))
```

```{r, echo=FALSE, message=FALSE}
library(widgetframe)
library("leaflet")
l <- leaflet(ham_sp) %>%
        addProviderTiles(providers$Stamen.Watercolor) %>% 
        # addTiles() %>%
        addPolygons() %>% 
        addMarkers(data=ham_cities_sp, popup=~as.character(name))
frameWidget(l, height = "400")
```

---
class: center, middle
# Part IV - Examples

---
- Explained code from the start

```{r, message=FALSE, eval=FALSE}
library("tigris")
oh <- counties(state="OH")
ham0 <- oh %>% 
        st_as_sf(.) %>% 
        filter(NAME=="Hamilton")
ham <- st_transform(ham0, 4326)
```

```{r, include=FALSE, eval=FALSE}
library("raster")
# getData("SRTM", lon=-8, lat=45, path="data")
# getData("SRTM", lon=-8, lat=40, path="data")
# dem <- raster("data/srtm_35_04.tif")
# system.time(plot(dem))
# system.time(image(dem))
# system.time(rasterVis::levelplot(dem))
# getData("SRTM", lon=-85, lat=40, path="data")
library("tigris")
library("sf")
library("tidyverse")
oh <- counties(state="OH")
ham <- oh %>% 
        st_as_sf(.) %>% 
        filter(NAME=="Hamilton")
plot(ham[0])
ham %>% st_write(., "data/hamilton_county.gpkg")

dem <- raster("data/srtm_20_05.tif")


dem2 <- crop(dem, extent(-85, -84, 38.8, 39.4))
writeRaster(dem2, "data/srtm.tif")
plot(dem2)
plot(ham, add = TRUE)
```

---
class: center, middle
# Part V - The end

---

![](figs/geocompr.png)

The online version of the book is at http://robinlovelace.net/geocompr/ and its source code at https://github.com/robinlovelace/geocompr.

We encourage contributions on any part of the book, including:

- Improvements to the text, e.g. clarifying unclear sentences, fixing typos (see guidance from [Yihui Xie](https://yihui.name/en/2013/06/fix-typo-in-documentation/))
- Changes to the code, e.g. to do things in a more efficient way
- Suggestions on content (see the projects [issue tracker](https://github.com/Robinlovelace/geocompr/issues) and the [work-in-progress](https://github.com/Robinlovelace/geocompr/tree/master/work-in-progress) folder for chapters in the pipeline)

Please see [our_style.md](https://github.com/Robinlovelace/geocompr/blob/master/our_style.md) for the books style.

---
### References

- Lovelace Robin, Nowosad Jakub, Meunchow Jannes. 2018. Geocomputation with R. CRC Press.
- Pebesma, Edzer. 2017. Sf: Simple Features for R. https://github.com/r-spatial/sf/.
- Pebesma, Edzer, and Roger Bivand. 2017. Sp: Classes and Methods for Spatial Data. https://CRAN.R-project.org/package=sp.
- Hijmans, Robert J.. 2016b. Raster: Geographic Data Analysis and Modeling. https://CRAN.R-project.org/package=raster.

---
### References

- H. Wickham. ggplot2: Elegant Graphics for Data Analysis. Springer-Verlag New York, 2016.
- Ryan Hafen (2017). geofacet: 'ggplot2' Faceting Utilities for Geographical Data. R package version 0.1.5. https://CRAN.R-project.org/package=geofacet
- Oscar Perpinan Lamigueiro and Robert Hijmans (2016), rasterVis. R package version 0.41. 
- Tennekes, Martijn. 2017. Tmap: Thematic Maps. https://CRAN.R-project.org/package=tmap.
- Cheng, Joe, Bhaskar Karambelkar, and Yihui Xie. 2017. Leaflet: Create Interactive Web Maps with the JavaScript ’Leaflet’ Library. https://CRAN.R-project.org/package=leaflet.
- Appelhans, Tim, Florian Detsch, Christoph Reudenbach, and Stefan Woellauer. 2017. Mapview: Interactive Viewing of Spatial Objects in R. https://CRAN.R-project.org/package=mapview.
-  Hadley Wickham, Romain Francois, Lionel Henry and Kirill Müller (2017). dplyr: A Grammar of Data Manipulation. R package version 0.7.4. https://CRAN.R-project.org/package=dplyr